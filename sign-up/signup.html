<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="signup.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito&display=swap"
      rel="stylesheet"
    />
    <title>ECX-Sign Up</title>
  </head>

  <body>
    <main>
      <section>
        <div class="circle"></div>
        <div class="tri"></div>
        <div class="square"></div>
        <div class="sq2"></div>
        <h1 class="welcome">Welcome To ECX!</h1>
        <p>
          You can be part of this, whether you have prior or no prior knowledge
          in your interested track.
        </p>
      </section>
      <div class="form-wrap">
        <form name="ecx_signup" action="" method="POST" data-netlify="true">
          <div class="intro">
            <img src="../images/ECX-Logo-01_no_background 2.png" alt="logo" />
            <h1 class="create">Join The Family</h1>
            <p>
              <span
                >You can be part of this, whether you have prior or no prior
                knowledge in your interested track.</span
              >
              <br />
              Kindly fill in the details to sign up as a member of ECX. You will
              be communicated to via the contact details given to us. See you on
              the other side!
            </p>
          </div>
          <hr />
          <!-- names -->
          <div class="wrap stretch">
            <div class="input-wrap w50">
              <label for="first-name">First Name:</label>
              <input
                type="text"
                placeholder="Enter First Name"
                id="first-name"
                name="first_name"
                required
              />
            </div>

            <div class="input-wrap w50">
              <label for="last-name">Last Name:</label>
              <input
                type="text"
                placeholder="Enter Last Name"
                id="last-name"
                name="last_name"
                required
              />
            </div>
          </div>

          <!-- email -->
          <div class="input-wrap w100">
            <label for="email">Email:</label>
            <input
              type="email"
              id="email"
              name="email_address"
              placeholder="Enter Your Email Address"
              required
            />
          </div>

          <!-- phone num and age -->
          <div class="wrap stretch">
            <!-- phone num -->
            <div class="input-wrap w50">
              <label for="phone">Phone Number:</label>
              <input
                type="tel"
                id="phone"
                max="11"
                name="phone_number"
                min="10"
                placeholder="Phone Number"
                required
              />
            </div>

            <!-- Age -->
            <div class="input-wrap w50">
              <label for="age">Age:</label>
              <input
                type="number"
                min="12"
                name="age"
                max="30"
                placeholder="Enter Your Age"
                id="age"
              />
            </div>
          </div>

          <!-- University -->
          <div class="input-wrap w100">
            <label for="university">Tertiary Institution:</label>
            <input
              type="text"
              id="university"
              name="university"
              placeholder="Enter University/ Polytechnic/ College of Edu. / Others"
              required
            />
          </div>

          <!-- Department and level -->
          <div class="wrap stretch">
            <div class="input-wrap w50">
              <label for="dept">Department:</label>
              <input
                type="text"
                id="dept"
                name="department"
                placeholder="Enter Department"
                required
              />
            </div>

            <div class="input-wrap w50">
              <label for="level" aria-required="true">Level:</label>
              <select name="level" id="level" class="select">
                <option value="null">Select Level</option>
                <option value="aspirant">Aspirant</option>
                <option value="100">100</option>
                <option value="200">200</option>
                <option value="300">300</option>
                <option value="400">400</option>
                <option value="500">500</option>
                <option value="600">600</option>
                <option value="700">700</option>
                <option value="800">800</option>
                <option value="ND">ND</option>
                <option value="ND2">ND2</option>
                <option value="HND">HND</option>
                <option value="HND2">HND2</option>
                <option value="graduate">Graduate</option>
              </select>
            </div>
          </div>

          <!--Gender and track  -->
          <div class="wrap stretch">
            <div class="input-wrap w50">
              <label for="gender">Gender:</label>
              <select
                name="gender"
                id="gender"
                class="select"
                aria-required="true"
              >
                <option value="null">Select Gender</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="undefined">Prefer not to say</option>
              </select>
            </div>
            <div class="input-wrap w50">
              <label for="track">Preferred Track:</label>
              <select
                name="track"
                id="track"
                class="select"
                aria-required="true"
              >
                <option value="null">Select Track</option>
                <option value="front-end">Front-End Web Development</option>
                <option value="back-end">Back-End Web Development</option>
                <option value="python">Python</option>
                <option value="mobile">Android/Mobile Development</option>
                <option value="ui/ux">UI/UX Design</option>
                <option value="eng-design">Engineering Design</option>
              </select>
            </div>
          </div>

          <!-- exp -->
          <fieldset aria-required="true">
            <legend>Level Of Expertise</legend>
            <div class="radio">
              <div class="radio-wrap">
                <input
                  name="level_of_expertise"
                  type="radio"
                  value="beginner"
                  id="beg"
                  required
                />
                <label for="beg">Beginner</label>
              </div>
              <div class="radio-wrap">
                <input
                  type="radio"
                  name="level_of_expertise"
                  value="intermediate"
                  id="inter"
                />
                <label for="inter">Intermediate</label>
              </div>
              <div class="radio-wrap">
                <input
                  type="radio"
                  name="level_of_expertise"
                  value="professional"
                  id="pro"
                />
                <label for="pro">Professional</label>
              </div>
              <div class="radio-wrap">
                <input
                  type="radio"
                  name="level_of_expertise"
                  value="expert"
                  id="exp"
                />
                <label for="exp">Expert</label>
              </div>
            </div>
          </fieldset>
          <p class="msg">
            &check; &nbsp; Your data has been submitted and is been processed...
          </p>
          <button class="signup-btn" type="submit">Sign Up</button>
        </form>
      </div>
    </main>
    <script>
      let form = document.querySelector("form");
      let btn = document.querySelector(".signup-btn");
      let msg = document.querySelector(".msg");

      //form submit function
      form.addEventListener("submit", e => {
        btn.textContent = "loading...";
        let formData = new FormData(form);
        fetch("/", {
          method: "POST",
          headers: {"Content-Type": "application/x-www-form-urlencoded"},
          body: new URLSearchParams(formData).toString(),
        })
          .then(() => {
            window.location.pathname = "/landing-page/landingpage.html";

            btn.textContent = "Sign Up";
            msg.style.cssText = "transform: scaleY(1);"; //error msg displays
            // clear inputs on submit
            let inputs = document.querySelectorAll(
              'input[type="text"],input[type="radio"],input[type="email"],input[type="number"],input[type="tel"], select'
            );
            Array.from(inputs).forEach(input => {
              if (input.type.toLowerCase() == "radio") input.checked = false;
              else if (input.className == "select") input.value = "null";
              else input.value = "";
            });
            setTimeout(() => {
              msg.style.cssText = "transform: scaleY(0); opacity: 0;"; //removes display message
            }, 3000);
            console.log("Form successfully submitted");
          })
          .catch(error => alert(error));

        e.preventDefault();
      });
    </script>
  </body>
</html>
